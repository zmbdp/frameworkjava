<!DOCTYPE HTML>
<html lang="zh">
<head>
<!-- Generated by javadoc (17) on Sun Feb 08 10:12:44 CST 2026 -->
<title>LogAction</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2026-02-08">
<meta name="description" content="declaration: package: com.zmbdp.common.log.annotation, annotation type: LogAction">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="跳过导航链接">跳过导航链接</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="导航">
<li><a href="../../../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="nav-bar-cell1-rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../../../help-doc.html#class">帮助</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>概要:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">可选</a>&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-required-element-summary">必需</a></li>
</ul>
<ul class="sub-nav-list">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">元素</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">程序包</span>&nbsp;<a href="package-summary.html">com.zmbdp.common.log.annotation</a></div>
<h1 title="Annotation Interface LogAction" class="title">Annotation Interface LogAction</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Retention.html" title="java.lang.annotation中的类或接口" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="java.lang.annotation中的类或接口" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/Target.html" title="java.lang.annotation中的类或接口" class="external-link">@Target</a>({<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#METHOD" title="java.lang.annotation中的类或接口" class="external-link">METHOD</a>,<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE" title="java.lang.annotation中的类或接口" class="external-link">TYPE</a>})
</span><span class="modifiers">public @interface </span><span class="element-name type-name-label">LogAction</span></div>
<div class="block">操作日志注解
 <p>
 用于标记需要记录操作日志的方法或类，自动记录方法执行、业务行为、参数、返回值、异常等信息。<br>
 基于 Spring AOP 实现，支持异步处理、条件记录、SpEL 表达式、性能监控等功能。
 <p>
 <b>支持两种使用方式：</b>
 <ul>
     <li><b>方法注解（推荐）</b>：标注在方法上，精确控制每个方法的日志策略</li>
     <li><b>类注解（辅助）</b>：标注在类上，作为默认配置，方法注解可覆盖</li>
 </ul>
 <p>
 <b>优先级规则：</b>
 <ul>
     <li>方法注解 > 类注解（方法注解存在时，完全使用方法注解的配置）</li>
     <li>如果方法注解不存在，使用类注解的配置</li>
     <li>类注解通常用于设置默认策略（如全局记录参数、全局开启异步等）</li>
 </ul>
 <p>
 <b>功能说明：</b>
 <ul>
     <li>记录方法执行和业务行为（如"新增用户"、"删除订单"）</li>
     <li>自动记录方法入参和返回值（可选）</li>
     <li>自动捕获异常并记录异常堆栈</li>
     <li>记录操作者信息（用户ID、用户名）</li>
     <li>记录请求来源（IP、User-Agent）</li>
     <li>记录操作时间戳（精确到毫秒）</li>
     <li>记录方法执行耗时（性能监控）</li>
     <li>支持 SpEL 表达式进行条件记录和模板化</li>
     <li>支持敏感字段脱敏</li>
     <li>支持异步处理，不阻塞业务线程</li>
 </ul>
 </p>
 <p>
 <b>使用示例：</b>
 <p>
 <b>方法注解示例：</b>
 <pre><code>
 // 示例 1：基础用法（仅记录操作描述）
 @PostMapping("/user/add")
 @LogAction("新增用户")
 public Result&lt;String&gt; addUser(@RequestBody UserDTO dto) {
     return Result.success("用户创建成功");
 }

 // 示例 2：记录入参和返回值
 @PostMapping("/order/create")
 @LogAction(value = "创建订单", recordParams = true, recordResult = true)
 public Result&lt;OrderVO&gt; createOrder(@RequestBody OrderDTO dto) {
     OrderVO order = orderService.create(dto);
     return Result.success(order);
 }

 // 示例 3：条件记录（只有成功时才记录）
 @PostMapping("/order/update")
 @LogAction(
     value = "更新订单状态",
     recordParams = true,
     recordResult = true,
     condition = "#result.success == true"
 )
 public Result&lt;String&gt; updateOrder(@RequestBody OrderDTO dto) {
     return Result.success("更新成功");
 }

 // 示例 4：使用 SpEL 表达式记录特定字段
 @PostMapping("/user/edit")
 @LogAction(
     value = "编辑用户",
     recordParams = true,
     paramsExpression = "{'userId': #userDTO.userId, 'userName': #userDTO.userName}"
 )
 public Result&lt;String&gt; editUser(@RequestBody UserDTO userDTO) {
     return Result.success("编辑成功");
 }

 // 示例 5：记录异常但不抛出（静默处理）
 @PostMapping("/data/sync")
 @LogAction(value = "数据同步", recordException = true, throwException = false)
 public Result&lt;String&gt; syncData() {
     // 即使异常也会记录日志，但不会抛出异常
     return Result.success("同步成功");
 }

 // 示例 6：指定业务模块和类型
 @PostMapping("/product/add")
 @LogAction(
     value = "新增商品",
     module = "商品管理",
     businessType = "商品操作",
     recordParams = true
 )
 public Result&lt;String&gt; addProduct(@RequestBody ProductDTO dto) {
     return Result.success("商品创建成功");
 }
 </code></pre>
 </p>
 <p>
 <b>类注解示例：</b>
 <pre><code>
 // 在 Controller 类上设置默认配置
 @RestController
 @RequestMapping("/user")
 @LogAction(recordParams = true, recordException = true, module = "用户管理")
 public class UserController {

     // 方法1：使用类注解的默认配置，只需要设置操作描述
     @PostMapping("/add")
     @LogAction("新增用户")
     public Result&lt;String&gt; addUser(@RequestBody UserDTO dto) {
         return Result.success("用户创建成功");
     }

     // 方法2：覆盖类注解的配置，不记录参数
     @PostMapping("/delete")
     @LogAction(value = "删除用户", recordParams = false)
     public Result&lt;String&gt; deleteUser(@RequestParam Long id) {
         return Result.success("删除成功");
     }

     // 方法3：完全使用类注解的配置（如果类注解设置了 value，这里可以不设置）
     @PostMapping("/update")
     public Result&lt;String&gt; updateUser(@RequestBody UserDTO dto) {
         // 注意：如果类注解的 value 为空，此方法不会记录日志
         return Result.success("更新成功");
     }
 }
 </code></pre>
 </p>
 <p>
 <b>通用注意事项：</b>
 <ul>
     <li>注解可以标注在方法上或类上，支持同时使用</li>
     <li>方法注解优先级高于类注解，方法注解存在时完全使用方法注解的配置</li>
     <li>类注解的 <code>value</code> 通常不设置（为空），仅作为默认配置使用</li>
     <li>如果类注解设置了 <code>value</code>，该类下所有方法都会使用该操作描述（除非方法注解覆盖）</li>
     <li>SpEL 表达式中可以使用方法参数名（如 <code>#userDTO</code>）或 <code>args[0]</code> 访问参数</li>
     <li>SpEL 表达式中可以使用 <code>#result</code> 访问方法返回值</li>
     <li>条件表达式返回 <code>false</code> 时，不会记录日志</li>
     <li>异步处理默认启用，可通过配置 <code>log.async-enabled</code> 控制</li>
     <li>敏感字段（如密码、手机号）会自动脱敏，可通过 <code>desensitizeFields</code> 配置</li>
     <li>无 HTTP 请求上下文时（如内部调用、单元测试）会跳过部分信息收集</li>
 </ul>
 </p></div>
<dl class="notes">
<dt>作者:</dt>
<dd>稚名不带撇</dd>
<dt>另请参阅:</dt>
<dd>
<ul class="see-list">
<li><a href="../aspect/LogActionAspect.html" title="com.zmbdp.common.log.aspect中的类"><code>LogActionAspect</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== ANNOTATION INTERFACE REQUIRED MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-required-element-summary">
<h2>必需元素概要</h2>
<div class="caption"><span>所需元素</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">修饰符和类型</div>
<div class="table-header col-second">必需的元素</div>
<div class="table-header col-last">说明</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#value()" class="member-name-link">value</a></code></div>
<div class="col-last even-row-color">
<div class="block">操作描述（必填）</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>可选元素概要</h2>
<div class="caption"><span>可选元素</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">修饰符和类型</div>
<div class="table-header col-second">可选元素</div>
<div class="table-header col-last">说明</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#businessType()" class="member-name-link">businessType</a></code></div>
<div class="col-last even-row-color">
<div class="block">业务类型（可选）</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#condition()" class="member-name-link">condition</a></code></div>
<div class="col-last odd-row-color">
<div class="block">条件表达式（SpEL）</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#desensitizeFields()" class="member-name-link">desensitizeFields</a></code></div>
<div class="col-last even-row-color">
<div class="block">需要脱敏的字段名（多个用逗号分隔）</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#module()" class="member-name-link">module</a></code></div>
<div class="col-last odd-row-color">
<div class="block">业务模块（可选）</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#paramsExpression()" class="member-name-link">paramsExpression</a></code></div>
<div class="col-last even-row-color">
<div class="block">参数记录表达式（SpEL）</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#recordException()" class="member-name-link">recordException</a></code></div>
<div class="col-last odd-row-color">
<div class="block">是否记录异常信息</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#recordParams()" class="member-name-link">recordParams</a></code></div>
<div class="col-last even-row-color">
<div class="block">是否记录方法入参</div>
</div>
<div class="col-first odd-row-color"><code>boolean</code></div>
<div class="col-second odd-row-color"><code><a href="#recordResult()" class="member-name-link">recordResult</a></code></div>
<div class="col-last odd-row-color">
<div class="block">是否记录方法返回值</div>
</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#resultExpression()" class="member-name-link">resultExpression</a></code></div>
<div class="col-last even-row-color">
<div class="block">返回值记录表达式（SpEL）</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#storageType()" class="member-name-link">storageType</a></code></div>
<div class="col-last odd-row-color">
<div class="block">日志存储类型（可选）</div>
</div>
<div class="col-first even-row-color"><code>boolean</code></div>
<div class="col-second even-row-color"><code><a href="#throwException()" class="member-name-link">throwException</a></code></div>
<div class="col-last even-row-color">
<div class="block">异常时是否抛出异常</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>元素详细资料</h2>
<ul class="member-list">
<li>
<section class="detail" id="value()">
<h3>value</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">value</span></div>
<div class="block">操作描述（必填）
 <p>
 用于描述当前操作的类型，如"新增用户"、"删除订单"、"更新商品状态"等。
 <p>
 <b>使用示例：</b>
 <pre><code>
 @LogAction("新增用户")
 public Result&lt;String&gt; addUser(@RequestBody UserDTO dto) {
     return Result.success("用户创建成功");
 }
 </code></pre></div>
<dl class="notes">
<dt>返回:</dt>
<dd>操作描述</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<ul class="member-list">
<li>
<section class="detail" id="recordParams()">
<h3>recordParams</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">recordParams</span></div>
<div class="block">是否记录方法入参
 <p>
 设置为 <code>true</code> 时，会将方法参数序列化为 JSON 格式记录到日志中。
 <p>
 <b>注意事项：</b>
 <ul>
     <li>参数会被序列化为 JSON，大对象可能影响性能</li>
     <li>敏感字段会自动脱敏（如密码、手机号）</li>
     <li>如果配置了 <code>paramsExpression</code>，优先使用表达式结果</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>是否记录方法入参，默认 false</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordResult()">
<h3>recordResult</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">recordResult</span></div>
<div class="block">是否记录方法返回值
 <p>
 设置为 <code>true</code> 时，会将方法返回值序列化为 JSON 格式记录到日志中。
 <p>
 <b>注意事项：</b>
 <ul>
     <li>返回值会被序列化为 JSON，大对象可能影响性能</li>
     <li>如果配置了 <code>resultExpression</code>，优先使用表达式结果</li>
     <li>void 方法无返回值，不会记录</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>是否记录方法返回值，默认 false</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="recordException()">
<h3>recordException</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">recordException</span></div>
<div class="block">是否记录异常信息
 <p>
 设置为 <code>true</code> 时，如果方法执行抛出异常，会记录异常信息和堆栈。
 <p>
 <b>注意事项：</b>
 <ul>
     <li>异常信息包括异常类型、异常消息和完整堆栈</li>
     <li>即使 <code>throwException = false</code>，异常信息仍会记录</li>
     <li>建议在生产环境启用，便于问题排查</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>是否记录异常信息，默认 true</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>true</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="throwException()">
<h3>throwException</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">throwException</span></div>
<div class="block">异常时是否抛出异常
 <p>
 设置为 <code>false</code> 时，即使方法执行失败，也不会抛出异常，仅记录日志。
 <p>
 <b>使用场景：</b>
 <ul>
     <li>非关键业务操作（如日志记录、数据同步）</li>
     <li>需要静默处理的场景</li>
 </ul>
 <p>
 <b>注意事项：</b>
 <ul>
     <li>设置为 <code>false</code> 时，方法会返回默认值（void 返回 null，其他返回类型返回 null 或默认值）</li>
     <li>异常信息仍会记录到日志中</li>
     <li>不建议在关键业务中使用，可能导致业务逻辑错误</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>异常时是否抛出异常，默认 true</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>true</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="condition()">
<h3>condition</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">condition</span></div>
<div class="block">条件表达式（SpEL）
 <p>
 使用 SpEL 表达式判断是否记录日志。只有当表达式返回 <code>true</code> 时才记录日志。
 <p>
 <b>使用示例：</b>
 <pre><code>
 // 只有成功时才记录
 @LogAction(value = "更新订单", condition = "#result.success == true")
 public Result&lt;String&gt; updateOrder(@RequestBody OrderDTO dto) {
     return Result.success("更新成功");
 }

 // 只有特定用户操作时才记录
 @LogAction(value = "删除数据", condition = "#userId != null &amp;&amp; #userId &gt; 0")
 public Result&lt;String&gt; deleteData(@RequestParam Long userId) {
     return Result.success("删除成功");
 }
 </code></pre>
 <p>
 <b>SpEL 表达式可用变量：</b>
 <ul>
     <li><code>#result</code>：方法返回值</li>
     <li><code>#参数名</code>：方法参数（如 <code>#userDTO</code>、<code>#orderId</code>）</li>
     <li><code>args[0]</code>、<code>args[1]</code>：方法参数数组</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>条件表达式，默认空字符串（无条件限制）</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="paramsExpression()">
<h3>paramsExpression</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">paramsExpression</span></div>
<div class="block">参数记录表达式（SpEL）
 <p>
 使用 SpEL 表达式自定义参数记录内容。如果配置了此表达式，会优先使用表达式结果，而不是完整的参数对象。
 <p>
 <b>使用示例：</b>
 <pre><code>
 // 只记录用户ID和用户名
 @LogAction(
     value = "编辑用户",
     paramsExpression = "{'userId': #userDTO.userId, 'userName': #userDTO.userName}"
 )
 public Result&lt;String&gt; editUser(@RequestBody UserDTO userDTO) {
     return Result.success("编辑成功");
 }

 // 记录订单ID和金额
 @LogAction(
     value = "创建订单",
     paramsExpression = "{'orderId': #orderDTO.id, 'amount': #orderDTO.amount}"
 )
 public Result&lt;String&gt; createOrder(@RequestBody OrderDTO orderDTO) {
     return Result.success("订单创建成功");
 }
 </code></pre>
 <p>
 <b>注意事项：</b>
 <ul>
     <li>表达式应返回 Map 或对象，会被序列化为 JSON</li>
     <li>如果表达式执行失败，会降级使用完整参数对象</li>
     <li>需要同时设置 <code>recordParams = true</code> 才会生效</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>参数记录表达式，默认空字符串（使用完整参数对象）</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="resultExpression()">
<h3>resultExpression</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">resultExpression</span></div>
<div class="block">返回值记录表达式（SpEL）
 <p>
 使用 SpEL 表达式自定义返回值记录内容。如果配置了此表达式，会优先使用表达式结果，而不是完整的返回值对象。
 <p>
 <b>使用示例：</b>
 <pre><code>
 // 只记录订单ID
 @LogAction(
     value = "创建订单",
     recordResult = true,
     resultExpression = "#result.data.id"
 )
 public Result&lt;OrderVO&gt; createOrder(@RequestBody OrderDTO dto) {
     return Result.success(orderVO);
 }
 </code></pre>
 <p>
 <b>注意事项：</b>
 <ul>
     <li>表达式应返回可序列化的对象</li>
     <li>如果表达式执行失败，会降级使用完整返回值对象</li>
     <li>需要同时设置 <code>recordResult = true</code> 才会生效</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>返回值记录表达式，默认空字符串（使用完整返回值对象）</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="module()">
<h3>module</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">module</span></div>
<div class="block">业务模块（可选）
 <p>
 用于分类日志，便于后续查询和分析。如"用户管理"、"订单管理"、"商品管理"等。</div>
<dl class="notes">
<dt>返回:</dt>
<dd>业务模块名称，默认空字符串</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="businessType()">
<h3>businessType</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">businessType</span></div>
<div class="block">业务类型（可选）
 <p>
 用于进一步分类日志，便于后续查询和分析。如"新增"、"删除"、"更新"、"查询"等。</div>
<dl class="notes">
<dt>返回:</dt>
<dd>业务类型，默认空字符串</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="desensitizeFields()">
<h3>desensitizeFields</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">desensitizeFields</span></div>
<div class="block">需要脱敏的字段名（多个用逗号分隔）
 <p>
 指定需要脱敏的参数字段名，支持自动脱敏。如"password,phone,idCard"。
 <p>
 <b>支持的脱敏类型：</b>
 <ul>
     <li><code>password</code>：密码（全部替换为*）</li>
     <li><code>phone</code>：手机号（保留前3位和后4位）</li>
     <li><code>idCard</code>：身份证号（保留前6位和后4位）</li>
     <li><code>email</code>：邮箱（保留@前3位和@后全部）</li>
     <li><code>bankCard</code>：银行卡号（保留前4位和后4位）</li>
 </ul>
 <p>
 <b>使用示例：</b>
 <pre><code>
 @LogAction(
     value = "用户注册",
     recordParams = true,
     desensitizeFields = "password,phone"
 )
 public Result&lt;String&gt; register(@RequestBody UserDTO dto) {
     // password 和 phone 字段会自动脱敏
     return Result.success("注册成功");
 }
 </code></pre></div>
<dl class="notes">
<dt>返回:</dt>
<dd>需要脱敏的字段名，多个用逗号分隔，默认空字符串</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="storageType()">
<h3>storageType</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a></span>&nbsp;<span class="element-name">storageType</span></div>
<div class="block">日志存储类型（可选）
 <p>
 指定当前方法使用的日志存储方式，优先级高于 Nacos 全局配置。
 <p>
 <b>支持的存储类型：</b>
 <ul>
     <li><code>console</code>：输出到控制台/日志文件（SLF4J，默认）</li>
     <li><code>database</code>：存储到数据库（需要配置数据库存储服务）</li>
     <li><code>file</code>：存储到文件系统</li>
     <li><code>redis</code>：存储到 Redis</li>
     <li><code>mq</code>：发送到消息队列</li>
 </ul>
 <p>
 <b>使用示例：</b>
 <pre><code>
 // 使用数据库存储
 @LogAction(value = "新增用户", storageType = "database")
 public Result&lt;String&gt; addUser(@RequestBody UserDTO dto) {
     return Result.success("用户创建成功");
 }

 // 使用消息队列存储
 @LogAction(value = "创建订单", storageType = "mq")
 public Result&lt;String&gt; createOrder(@RequestBody OrderDTO dto) {
     return Result.success("订单创建成功");
 }
 </code></pre>
 <p>
 <b>注意事项：</b>
 <ul>
     <li>如果为空字符串，使用 Nacos 全局配置 <code>log.storage-type</code></li>
     <li>如果 Nacos 也未配置，使用默认值 <code>console</code></li>
     <li>优先级：方法注解 > Nacos 全局配置 > 默认值（console）</li>
 </ul></div>
<dl class="notes">
<dt>返回:</dt>
<dd>日志存储类型，默认空字符串（使用全局配置）</dd>
</dl>
<dl class="notes">
<dt>默认值:</dt>
<dd>""</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
